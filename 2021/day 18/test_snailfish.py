from snailfish import levels, explode


def test_levels():
    assert levels([["x", "y"], ["z", "p"], ["m", ["a", "b", "c", ["d", "e"]]]]) == [
        ("x", 1),
        ("y", 1),
        ("z", 1),
        ("p", 1),
        ("m", 1),
        ("a", 2),
        ("b", 2),
        ("c", 2),
        ("d", 3),
        ("e", 3),
    ]


def test_explode():
    assert explode([[[[[9, 8], 1], 2], 3], 4]) == [[[[0, 9], 2], 3], 4]
    assert explode([7, [6, [5, [4, [3, 2]]]]]) == [7, [6, [5, [7, 0]]]]
    assert explode([[6, [5, [4, [3, 2]]]], 1]) == [[6, [5, [7, 0]]], 3]
    assert explode([[3, [2, [1, [7, 3]]]], [6, [5, [4, [3, 2]]]]]) == [
        [3, [2, [8, 0]]],
        [9, [5, [4, [3, 2]]]],
    ]
    assert explode([[3, [2, [8, 0]]], [9, [5, [4, [3, 2]]]]]) == [
        [3, [2, [8, 0]]],
        [9, [5, [7, 0]]],
    ]
